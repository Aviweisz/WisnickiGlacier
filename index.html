<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wisnicki Family - Glacier National Park Itinerary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0C1427; /* Dark Navy Blue */
            color: #f1f5f9; 
        }
        .day-card {
            background-color: #162039; /* Slightly lighter navy */
            border: 1px solid #334155; /* Slate-700 border */
            border-radius: 0.75rem;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .day-card:hover,
        details[open].day-card {
            border-color: #67e8f9; /* Bright Cyan */
        }
        .current-day {
            border-color: #67e8f9; /* Bright Cyan */
            box-shadow: 0 0 15px rgba(103, 232, 249, 0.3);
        }
        .details-content {
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        details[open] .details-content {
            max-height: 2000px;
        }
        details:not([open]) .details-content {
            max-height: 0;
        }
        details summary::-webkit-details-marker {
            display: none;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #162039;
            padding: 2rem;
            border-radius: 0.75rem;
            border: 1px solid #67e8f9;
            width: 90%;
            max-width: 500px;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        .reminder {
            background-color: rgba(103, 232, 249, 0.1);
            border-left: 4px solid #67e8f9;
            padding: 0.75rem 1rem;
            border-radius: 0.25rem;
        }
        .boarding-pass {
            background-color: #fff;
            color: #000;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }
    </style>
</head>
<body>

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-white mb-6">
            <div class="flex justify-between items-center border-b border-slate-700 pb-4">
                <h1 class="text-2xl font-bold flex items-center">
                    <i data-lucide="mountain-snow" class="mr-3 text-cyan-400"></i>
                    Wisnicki Family Trip
                </h1>
                <div class="text-right">
                    <p class="font-semibold">Glacier National Park</p>
                    <p class="text-sm text-slate-400">August 17 - 21, 2025</p>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-3 gap-4 text-center bg-[#162039] p-4 rounded-lg mb-8 border border-slate-700">
            <div>
                <p class="text-xs text-slate-400 uppercase tracking-wider">Current Activity</p>
                <p class="text-lg font-semibold text-white">Trip Overview</p>
            </div>
            <div>
                <p class="text-xs text-slate-400 uppercase tracking-wider">Local Time</p>
                <p class="text-lg font-semibold text-white" id="local-time">--:-- --</p>
            </div>
            <div>
                <p class="text-xs text-slate-400 uppercase tracking-wider">Weather</p>
                <a href="https://www.google.com/search?q=weather+in+glacier+national+park" target="_blank" class="text-lg font-semibold text-cyan-400 hover:underline cursor-pointer">View Forecast</a>
            </div>
        </div>

        <div id="itinerary-container" class="space-y-4">
            <!-- Itinerary will be dynamically generated here -->
        </div>
        
        <footer class="text-center mt-12 text-slate-500">
            <p>Itinerary by Avi Weisz <a href="tel:8484805197" class="hover:underline text-cyan-400">848-480-5197</a></p>
        </footer>
    </div>

    <!-- Reservation Modal -->
    <div id="reservation-modal" class="modal-overlay">
        <div class="modal-content">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div id="modal-body">
                <!-- Modal content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        const itineraryData = [
            {
                day: 1,
                date: "2025-08-17",
                title: "Arrival & Zipline Fun",
                driveTime: "30 minutes",
                events: [
                    { time: "1:21 PM", description: "Arrival at FCA Glacier Park Int'l Airport", details: "All 6 passengers | United Airlines Flight #5902", action: 'showArrivalFlightDetails' },
                    { time: "2:00 PM", description: "Pick up rental car", details: "Thrifty Car Rental", action: 'showRentalCarDetails' },
                    { time: "2:30 PM", description: "Depart to Glacier Zipline", details: "7840 Hwy 2 E, Columbia Falls, MT", link: "https://www.google.com/maps/search/?api=1&query=7840+Hwy+2+E,Columbia+Falls,MT" },
                    { time: "4:00 PM", description: "Start Glacier Zipline Tour", details: "Booking #305101648", action: 'showZiplineDetails' },
                    { time: "6:00 PM", description: "Optional: Stock up on food", details: "Safeway", link: "https://www.google.com/maps/place/6580+US-93,+Whitefish,+MT+59937/@48.3991887,-114.3395465,17z/data=!3m1!4b1!4m6!3m5!1s0x5366683474adc175:0xd479664a8d162244!8m2!3d48.3991887!4d-114.3369716!16s%2Fg%2F11bw3xvbp6?entry=ttu&g_ep=EgoyMDI1MDgxMS4wIKXMDSoASAFQAw%3D%3D" },
                    { time: "7:00 PM", description: "Depart to Airbnb", details: "463 Tamarack Creek Rd", link: "https://www.google.com/maps/search/?api=1&query=463+Tamarack+Creek+Rd,Whitefish,MT" },
                    { time: "Info", description: "Airbnb Details", details: "463 Tamarack Creek Rd", action: 'showAirbnbDetails' },
                    { time: "8:30 PM", description: "Mincha/Maariv", details: "North Star Ranch – 355 Beaver Lake Rd", link: "https://www.google.com/maps/search/?api=1&query=355+Beaver+Lake+Rd,Whitefish,MT" }
                ]
            },
            {
                day: 2,
                date: "2025-08-18",
                title: "Trails, Off-Roading & Dam Views",
                events: [
                    { time: "9:00 AM", description: "Depart to Glacier Ridge Runners", link: "https://www.google.com/maps/place/Glacier+Ridge+Runners/@48.3859912,-114.0609126,17z/data=!3m1!4b1!4m6!3m5!1s0x53663e69bd3af0af:0x5ad16fb22c6886f!8m2!3d48.3859912!4d-114.0583377!16s%2Fg%2F11d_tl1dd6?entry=ttu&g_ep=EgoyMDI1MDgxMC4wIKXMDSoASAFQAw%3D%3D" },
                    { time: "10:00 AM", description: "Side-by-Side Adventure (6-seater)", details: "Confirmation: QZJEYW", action: 'showAtvDetails' },
                    { time: "Reminder", description: "Remember to bring your permits for Glacier National Park!", details: "Park entry and vehicle reservations are required.", type: 'reminder' },
                    { time: "1:30 PM", description: "Depart to Avalanche Lake Trailhead", link: "https://www.google.com/maps/search/?api=1&query=Avalanche+Lake+Trailhead,Glacier+National+Park" },
                    { time: "3:00 PM", description: "Hike Avalanche Lake", details: "Relatively easy 4.5-mile round trip hike.", action: 'showTrailInfo' },
                    { time: "6:00 PM", description: "Return to Airbnb", details: "463 Tamarack Creek Rd", link: "https://www.google.com/maps/search/?api=1&query=463+Tamarack+Creek+Rd,Whitefish,MT" },
                    { time: "8:30 PM", description: "Mincha/Maariv", details: "North Star Ranch – 355 Beaver Lake Rd", link: "https://www.google.com/maps/search/?api=1&query=355+Beaver+Lake+Rd,Whitefish,MT" }
                ]
            },
            {
                day: 3,
                date: "2025-08-19",
                title: "Glacier Park Highlights",
                events: [
                    { time: "Reminder", description: "Remember to bring your permits for Glacier National Park!", details: "Park entry and vehicle reservations are required.", type: 'reminder' },
                    { time: "8:30 AM", description: "Depart to Wild River Adventures", link: "https://www.google.com/maps/search/?api=1&query=Wild+River+Adventures,West+Glacier,MT" },
                    { time: "10:00 AM", description: "Rafting", details: "Remember to bring a change of clothes!" },
                    { time: "1:00 PM", description: "Depart for Going-to-the-Sun Road", details: "Destination: Logan Pass Visitor Center", link: "https://www.google.com/maps/place/Logan+Pass+Visitor+Center/@48.6912553,-113.730293,15z/data=!3m1!5s0x5368af512bc4b521:0x815402de1f2424db!4m6!3m5!1s0x5368af512bf83b1f:0x64cdf1479b75bbbd!8m2!3d48.6953121!4d-113.7177546!16s%2Fm%2F04yfp25?entry=ttu&g_ep=EgoyMDI1MDgxMC4wIKXMDSoASAFQAw%3D%3D" },
                    { time: "", description: "Stop: McDonald Falls", details: "Short walk to a beautiful waterfall.", link: "https://www.google.com/maps/search/?api=1&query=McDonald+Falls,Glacier+National+Park" },
                    { time: "", description: "Stop: The Loop Overlook", details: "Great views of Heaven's Peak.", link: "https://www.google.com/maps/search/?api=1&query=The+Loop,Going-to-the-Sun+Road" },
                    { time: "", description: "Stop: Jackson Glacier Overlook", details: "View one of the park's largest glaciers.", link: "https://www.google.com/maps/search/?api=1&query=Jackson+Glacier+Overlook" },
                    { time: "3:00 PM", description: "Hike Hidden Lake Overlook", details: "Popular boardwalk trail with stunning views.", link: "https://www.google.com/maps/search/?api=1&query=Hidden+Lake+Overlook+Trailhead", action: 'showHiddenLakeTrailInfo' },
                    { time: "5:00 PM", description: "Depart to Apgar Village", link: "https://www.google.com/maps/search/?api=1&query=Apgar+Village,Glacier+National+Park" },
                    { time: "6:00 PM", description: "Explore Apgar Village", details: "Shops, ice cream, and views of Lake McDonald." },
                    { time: "7:00 PM", description: "Sunset Cruise on Lake McDonald", details: "Reservation Confirmed. Departs from Lake McDonald Lodge.", link: "https://www.google.com/maps/search/?api=1&query=Lake+McDonald+Lodge", action: 'showCruiseDetails' },
                    { time: "8:00 PM", description: "Return to Airbnb", link: "https://www.google.com/maps/search/?api=1&query=463+Tamarack+Creek+Rd,Whitefish,MT" }
                ]
            },
            {
                day: 4,
                date: "2025-08-20",
                title: "Aerial Views, Lake Sports & Sunset Ride",
                events: [
                    { time: "Reminder", description: "Remember to bring your permits for Glacier National Park!", details: "Park entry and vehicle reservations are required.", type: 'reminder' },
                    { time: "9:30 AM", description: "Depart to Rising Sun Boat Dock", link: "https://www.google.com/maps/search/?api=1&query=Rising+Sun+Boat+Dock,Glacier+National+Park" },
                    { time: "1:00 PM", description: "St. Mary Lake Boat Shuttle", details: "Reservation Confirmed", action: 'showBoatShuttleDetails' },
                    { time: "1:45 PM", description: "Hike Three Falls via Piegan Pass", details: "See St. Mary, Virginia, and Baring Falls." },
                    { time: "4:30 PM", description: "Depart to Snowy Springs Outfitters", link: "https://www.google.com/maps/search/?api=1&query=Snowy+Springs+Outfitters" },
                    { time: "5:30 PM", description: "Horseback Riding", details: "Caprs Cell: <a href='tel:4068905389' class='text-cyan-400 hover:underline'>406-890-5389</a> | Office: <a href='tel:4062269225' class='text-cyan-400 hover:underline'>406-226-9225</a>" },
                    { time: "6:30 PM", description: "Return to Airbnb", link: "https://www.google.com/maps/search/?api=1&query=463+Tamarack+Creek+Rd,Whitefish,MT" }
                ]
            },
            {
                day: 5,
                date: "2025-08-21",
                title: "Departure Day",
                events: [
                    { time: "10:00 AM", description: "Check out of Airbnb", details: "Depart to Flathead Lake: 7007 U.S. 93 S", link: "https://www.google.com/maps/search/?api=1&query=7007+U.S.+93+S,Lakeside,MT" },
                    { time: "11:00 AM", description: "Parasailing", details: "Contact info <a href='tel:4062706256' class='text-cyan-400 hover:underline'>406-270-6256</a>" },
                    { time: "12:15 PM", description: "Driver picks up 2 grandchildren for FCA Airport", details: "Contact: Bobby Driver – <a href='tel:4062494680' class='text-cyan-400 hover:underline'>406-249-4680</a>" },
                    { time: "1:00 PM", description: "Water Sports with Captain", details: "130 Bills Rd", link: "https://www.google.com/maps/search/?api=1&query=130+Bills+Rd,Somers,MT" },
                    { time: "5:00 PM", description: "Change & freshen up" },
                    { time: "5:30 PM", description: "Depart to FCA Glacier Park Int'l Airport", link: "https://www.google.com/maps/search/?api=1&query=FCA+Glacier+Park+International+Airport" },
                    { time: "6:00 PM", description: "Return car rental at Thrifty" },
                    { time: "8:02 PM", description: "Fly out", details: "Alaska Airlines Flight #2288", action: 'showFlightDetails'},
                    { time: "11:59 PM", description: "Land in ONT Airport" },
                    { time: "12:30 AM", description: "Driver will be waiting for you", details: "Abe - <a href='tel:4242000013' class='text-cyan-400 hover:underline'>424-200-0013</a>" }
                ]
            }
        ];

        const modal = document.getElementById('reservation-modal');
        const modalBody = document.getElementById('modal-body');

        function showRentalCarDetails() {
            window.open('https://view.emails.thrifty.com/?qs=76680a6cc57ecd028de0b8f439cff74fac319457c745a9c8536d733d971da123907320976e2981ea0e0a49ee21a9a587b9fd894db7d340567864147d998fb5602c0ff0de4dd57b97c1ce9fc186261de1', '_blank');
        }

        function showZiplineDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Zipline Tour Details</h2>
                <div class="space-y-3 text-slate-300">
                    <p><strong class="text-white">Booking #:</strong> 305101648</p>
                    <p><strong class="text-white">Activity:</strong> Zip Line Canopy Tour</p>
                    <p><strong class="text-white">Time:</strong> 4:00 PM - 6:00 PM</p>
                    <p><strong class="text-white">Participants:</strong> 6 Zipline Riders</p>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }

        function showAtvDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Side-by-Side Adventure Details</h2>
                <div class="space-y-3 text-slate-300">
                    <p><strong class="text-white">Confirmation #:</strong> QZJEYW</p>
                    <p><strong class="text-white">Activity:</strong> 6-Seater Side-by-Side</p>
                    <p><strong class="text-white">Company:</strong> Glacier Ridge Runners</p>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }

        function showAirbnbDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Airbnb Details</h2>
                <div class="space-y-3 text-slate-300">
                    <p><strong class="text-white">Address:</strong> 463 Tamarack Creek Rd</p>
                    <p><strong class="text-white">Booking #:</strong> ORB13897290</p>
                    <p><strong class="text-white">Door Code:</strong> 2019</p>
                    <p><strong class="text-white">Wifi Network:</strong> Tamarek Place</p>
                    <p><strong class="text-white">Wifi Password:</strong> LAKEVIEW1755</p>
                    <p><strong class="text-white">Check-in:</strong> 4:00 PM</p>
                    <p><strong class="text-white">Check-out:</strong> 10:00 AM</p>
                    <p><strong class="text-white">Management:</strong> Explore Montana Rentals</p>
                    <p><strong class="text-white">Contact:</strong> <a href='tel:4062507649' class='text-cyan-400 hover:underline'>(406) 250-7649</a></p>
                    <a href="https://guide.touchstay.com/guest/bvh7I3sL6Urpe/info/323515" target="_blank" class="mt-4 inline-flex items-center px-3 py-1 bg-slate-700 hover:bg-slate-600 text-cyan-400 text-sm font-semibold rounded-md">More Info <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i></a>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }
        
        function showTrailInfo() {
            window.open('https://www.alltrails.com/trail/us/montana/avalanche-lake--6', '_blank');
        }

        function showHiddenLakeTrailInfo() {
            window.open('https://www.alltrails.com/trail/us/montana/hidden-lake-overlook', '_blank');
        }

        function showCruiseDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Sunset Cruise Details</h2>
                <div class="space-y-3 text-slate-300">
                    <p><strong class="text-white">Confirmation #:</strong> PS071625136</p>
                    <p><strong class="text-white">Name:</strong> Nochum Wisnicki</p>
                    <p><strong class="text-white">Location:</strong> Lake McDonald</p>
                    <p><strong class="text-white">Tour:</strong> Scenic Tour</p>
                    <p><strong class="text-white">Passengers:</strong> 6 Adults (ages 13 and up)</p>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }

        function showFlightDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Flight Summary</h2>
                <div class="space-y-6 text-slate-300">
                    <!-- Flight 1 -->
                    <div>
                        <p class="font-semibold text-white">Alaska 2288</p>
                        <p>Kalispell (FCA) to Seattle (SEA)</p>
                        <p>Departs: 8:02 PM | Arrives: 8:36 PM</p>
                    </div>
                    <!-- Flight 2 -->
                    <div>
                        <p class="font-semibold text-white">Alaska 1040</p>
                        <p>Seattle (SEA) to Ontario (ONT)</p>
                        <p>Departs: 9:17 PM | Arrives: 11:59 PM</p>
                    </div>
                    <!-- Passengers -->
                    <div class="border-t border-slate-700 pt-4">
                        <p class="font-semibold text-white mb-2">Passengers</p>
                        <p>Norman Wisnicki - E-ticket: 0272109688072</p>
                        <p>Harriet Wisnicki - E-ticket: 0272109688073</p>
                    </div>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }

        function showArrivalFlightDetails() {
            const passengers = [
                { name: 'ABRAHAM/SHAYNA', seat: '17C', group: 4 },
                { name: 'WISNICKI/AHUVA', seat: '17D', group: 3 },
                { name: 'WISNICKI/AYALA', seat: '17A', group: 3 },
                { name: 'WISNICKI/HARRIETMAGNA', seat: '18A', group: 3 },
                { name: 'WISNICKI/NORMANSTEVEN', seat: '18B', group: 3 },
                { name: 'WISNICKI/ZAHAVA', seat: '17B', group: 3 },
            ];

            let boardingPassesHtml = passengers.map((p, index) => `
                <div class="boarding-pass p-4 mb-4">
                    <div class="flex justify-between items-center pb-2 border-b">
                        <div class="font-bold text-lg text-blue-700">UNITED</div>
                        <div>
                            <p class="text-xs text-right">FLIGHT</p>
                            <p class="font-bold text-right">UA 5902</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-center my-4">
                        <div>
                            <p class="text-xs text-gray-500">FROM</p>
                            <p class="text-2xl font-bold">LAX</p>
                            <p class="text-xs">Los Angeles</p>
                        </div>
                        <div class="flex items-center justify-center">
                             <i data-lucide="plane" class="text-gray-400"></i>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">TO</p>
                            <p class="text-2xl font-bold">FCA</p>
                            <p class="text-xs">Kalispell</p>
                        </div>
                    </div>
                    <div class="border-t pt-2">
                        <p class="text-xs text-gray-500">PASSENGER</p>
                        <p class="font-semibold">${p.name}</p>
                    </div>
                    <div class="grid grid-cols-3 gap-4 text-center my-4">
                        <div>
                            <p class="text-xs text-gray-500">SEAT</p>
                            <p class="font-bold text-lg">${p.seat}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">GROUP</p>
                            <p class="font-bold text-lg">${p.group}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500">BOARDING</p>
                            <p class="font-bold text-lg">8:57 AM</p>
                        </div>
                    </div>
                    <div class="flex justify-center">
                        <svg id="barcode-${index}"></svg>
                    </div>
                </div>
            `).join('');

            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Arrival Flight Details</h2>
                <p class="mb-4 text-slate-300"><strong class="text-white">Confirmation #:</strong> F8H1R3</p>
                ${boardingPassesHtml}
            `;
            modal.classList.add('visible');
            lucide.createIcons();

            passengers.forEach((p, index) => {
                JsBarcode(`#barcode-${index}`, `F8H1R3 ${p.name.replace('/', '')} ${p.seat}`, {
                    format: "CODE128",
                    width: 2,
                    height: 50,
                    displayValue: false
                });
            });
        }

        function showBoatShuttleDetails() {
            modalBody.innerHTML = `
                <h2 class="text-2xl font-bold text-white mb-4">Boat Shuttle Details</h2>
                <div class="space-y-3 text-slate-300">
                    <p><strong class="text-white">Location:</strong> St. Mary Lake at Rising Sun</p>
                    <p><strong class="text-white">Tour:</strong> Scenic Tour + Hike</p>
                    <p><strong class="text-white">Passengers:</strong> 6 Adults (ages 13 and up)</p>
                </div>
            `;
            modal.classList.add('visible');
            lucide.createIcons();
        }

        function closeModal() {
            modal.classList.remove('visible');
        }

        function renderItinerary() {
            const container = document.getElementById('itinerary-container');
            const today = new Date();
            today.setHours(0, 0, 0, 0); 

            itineraryData.forEach((dayData, index) => {
                const dayCard = document.createElement('details');
                dayCard.className = 'day-card';
                
                const dayDate = new Date(dayData.date + 'T00:00:00-06:00');
                if (dayDate.toDateString() === today.toDateString()) {
                    dayCard.classList.add('current-day');
                    dayCard.open = true;
                }

                let eventsHtml = '';
                dayData.events.forEach(event => {
                    const hasLink = event.link;
                    const eventDescription = hasLink ? `<a href="${event.link}" target="_blank" class="hover:underline text-cyan-400">${event.description} <i data-lucide="external-link" class="inline-block w-4 h-4 -mt-1"></i></a>` : event.description;
                    
                    let actionButton = '';
                    if (event.action) {
                        let buttonText = "View Details";
                        if (event.action === 'showTrailInfo' || event.action === 'showHiddenLakeTrailInfo') {
                            buttonText = "Trail Info";
                        } else if (event.action === 'showCruiseDetails' || event.action === 'showBoatShuttleDetails') {
                            buttonText = "Reservation Details";
                        } else if (event.action === 'showFlightDetails' || event.action === 'showArrivalFlightDetails') {
                            buttonText = "Flight Details";
                        }
                        actionButton = `<button onclick="${event.action}()" class="mt-2 inline-flex items-center px-3 py-1 bg-slate-700 hover:bg-slate-600 text-cyan-400 text-sm font-semibold rounded-md">${buttonText} <i data-lucide="arrow-right" class="w-4 h-4 ml-2"></i></button>`;
                    }
                    
                    if (event.type === 'reminder') {
                        eventsHtml += `
                            <li class="flex items-start space-x-6 pl-8">
                                <div class="flex-shrink-0 w-24 text-right">
                                    <span class="text-cyan-400 font-medium">Reminder</span>
                                </div>
                                <div class="relative w-full">
                                    <div class="absolute top-1.5 left-[-13px] h-full border-l-2 border-slate-700"></div>
                                    <div class="absolute top-2 left-[-18px] w-3 h-3 bg-cyan-400 rounded-full border-2 border-slate-700"></div>
                                    <p class="font-semibold text-white">${event.description}</p>
                                    <p class="text-sm text-slate-400 mt-1">${event.details || ''}</p>
                                </div>
                            </li>
                        `;
                    } else {
                        eventsHtml += `
                            <li class="flex items-start space-x-6 pl-8">
                                <div class="flex-shrink-0 w-24 text-right">
                                    <span class="text-slate-300 font-medium">${event.time}</span>
                                </div>
                                <div class="relative w-full">
                                    <div class="absolute top-1.5 left-[-13px] h-full border-l-2 border-slate-700"></div>
                                    <div class="absolute top-2 left-[-18px] w-3 h-3 bg-slate-600 rounded-full border-2 border-slate-700"></div>
                                    <p class="font-semibold text-white">${eventDescription}</p>
                                    <p class="text-sm text-slate-400 mt-1">${event.details || ''}</p>
                                    ${actionButton}
                                </div>
                            </li>
                        `;
                    }
                });

                dayCard.innerHTML = `
                    <summary class="p-4 cursor-pointer flex justify-between items-center list-none">
                        <div>
                            <p class="font-semibold text-white">${new Date(dayData.date + 'T00:00:00-06:00').toLocaleString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}</p>
                            <p class="text-sm text-slate-400">${dayData.title}</p>
                        </div>
                        <div class="transform transition-transform duration-300">
                           <i data-lucide="chevron-down" class="w-5 h-5 text-slate-400"></i>
                        </div>
                    </summary>
                    <div class="details-content">
                        <div class="pt-2 pb-4 px-4 border-t border-slate-700">
                            <ul class="space-y-6 mt-4">
                                ${eventsHtml}
                            </ul>
                        </div>
                    </div>
                `;
                container.appendChild(dayCard);
                 
                dayCard.addEventListener('toggle', (event) => {
                    const icon = event.target.querySelector('summary div i');
                    if (icon) {
                        icon.classList.toggle('rotate-180', event.target.open);
                    }
                });
            });

            lucide.createIcons();
        }
        
        function updateTime() {
            const timeEl = document.getElementById('local-time');
            const time = new Date().toLocaleTimeString('en-US', { timeZone: 'America/Denver', hour: '2-digit', minute: '2-digit', hour12: true });
            timeEl.textContent = time;
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderItinerary();
            updateTime();
            setInterval(updateTime, 1000 * 60);
            
            // Close modal on overlay click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
        });

    </script>
</body>
</html>
